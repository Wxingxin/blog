### ä¸€ã€å˜é‡å£°æ˜æ–¹å¼

#### 1. **varï¼ˆES5 åŠä»¥å‰ï¼‰**

- **å‡½æ•°ä½œç”¨åŸŸ**ï¼šåœ¨å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡å¯¹æ•´ä¸ªå‡½æ•°å¯è§ã€‚
- **å¯é‡å¤å£°æ˜**ï¼šåŒä¸€ä½œç”¨åŸŸå†…å¯å¤šæ¬¡å£°æ˜åŒä¸€å˜é‡ã€‚
- **å˜é‡æå‡**ï¼šå£°æ˜ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œä½†èµ‹å€¼ä¸ä¼šã€‚

```javascript
function example() {
  if (true) {
    var x = 10;
  }
  console.log(x); // 10ï¼ˆå‡½æ•°ä½œç”¨åŸŸï¼‰
}

console.log(y); // undefinedï¼ˆå˜é‡æå‡ï¼Œä½†æœªèµ‹å€¼ï¼‰
var y = 20;
```

#### 2. **let å’Œ constï¼ˆES6+ï¼‰**

- **å—çº§ä½œç”¨åŸŸ**ï¼šåœ¨ `{}` å†…å£°æ˜çš„å˜é‡ä»…åœ¨è¯¥å—å†…å¯è§ã€‚
- **ä¸å¯é‡å¤å£°æ˜**ï¼šåŒä¸€ä½œç”¨åŸŸå†…é‡å¤å£°æ˜ä¼šæŠ¥é”™ã€‚
- **æš‚æ—¶æ€§æ­»åŒºï¼ˆTDZï¼‰**ï¼šå˜é‡åœ¨å£°æ˜å‰æ— æ³•è®¿é—®ã€‚

```javascript
function example() {
  if (true) {
    let x = 10;
    const y = 20;
  }
  console.log(x); // æŠ¥é”™ï¼šx is not defined
  console.log(y); // æŠ¥é”™ï¼šy is not defined
}

console.log(z); // æŠ¥é”™ï¼šCannot access 'z' before initialization
let z = 30;
```

### äºŒã€ä½œç”¨åŸŸç±»å‹

#### 1. **å…¨å±€ä½œç”¨åŸŸ**

- å…¨å±€å˜é‡åœ¨æ•´ä¸ªç¨‹åºä¸­å¯è§ã€‚
- åœ¨æµè§ˆå™¨ä¸­ï¼Œå…¨å±€ä½œç”¨åŸŸçš„å˜é‡é™„åŠ åˆ° `window` å¯¹è±¡ã€‚

```javascript
var globalVar = "I'm global";
console.log(window.globalVar); // "I'm global"
```

#### 2. **å‡½æ•°ä½œç”¨åŸŸ**

- `var` å£°æ˜çš„å˜é‡å…·æœ‰å‡½æ•°ä½œç”¨åŸŸã€‚

```javascript
function demo() {
  var funcVar = "Inside function";
  if (true) {
    var sameScope = "Same scope";
  }
  console.log(sameScope); // "Same scope"
}
```

#### 3. **å—çº§ä½œç”¨åŸŸ**

- `let` å’Œ `const` å£°æ˜çš„å˜é‡å…·æœ‰å—çº§ä½œç”¨åŸŸã€‚

```javascript
{
  let blockVar = "Inside block";
  const constant = 42;
}
console.log(blockVar); // æŠ¥é”™ï¼šblockVar is not defined
```

### ä¸‰ã€å˜é‡æå‡ï¼ˆHoistingï¼‰

- **var**ï¼šå£°æ˜è¢«æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œèµ‹å€¼ç•™åœ¨åŸåœ°ã€‚
- **let/const**ï¼šå£°æ˜è¢«æå‡ï¼Œä½†å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼ˆTDZï¼‰ï¼Œæ— æ³•åœ¨å£°æ˜å‰è®¿é—®ã€‚

```javascript
console.log(a); // undefinedï¼ˆvar æå‡ï¼‰
var a = 10;

console.log(b); // æŠ¥é”™ï¼šCannot access 'b' before initialization
let b = 20;
```

### å››ã€é—­åŒ…ï¼ˆClosuresï¼‰

é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ï¼Œå³ä½¿è¯¥å‡½æ•°å·²æ‰§è¡Œå®Œæ¯•ã€‚

#### 1. **åŸºæœ¬ç¤ºä¾‹**

```javascript
function outer() {
  let count = 0;
  function inner() {
    count++; // é—­åŒ…æ•è·å¹¶è®°ä½ count
    return count;
  }
  return inner;
}

const counter = outer();
console.log(counter()); // 1
console.log(counter()); // 2
```

#### 2. **é—­åŒ…çš„åº”ç”¨**

- **æ•°æ®å°è£…**ï¼šå®ç°ç§æœ‰å˜é‡å’Œæ–¹æ³•ã€‚
- **å‡½æ•°æŸ¯é‡ŒåŒ–**ï¼šå»¶è¿Ÿæ‰§è¡Œå’Œå‚æ•°å¤ç”¨ã€‚
- **äº‹ä»¶å¤„ç†**ï¼šä¿å­˜äº‹ä»¶å‘ç”Ÿæ—¶çš„çŠ¶æ€ã€‚

```javascript
// ç§æœ‰è®¡æ•°å™¨
function createCounter() {
  let count = 0;
  return {
    increment: () => count++,
    getCount: () => count,
  };
}

const counter = createCounter();
counter.increment();
console.log(counter.getCount()); // 1
```

### äº”ã€è¯æ³•ä½œç”¨åŸŸï¼ˆLexical Scopingï¼‰

- ä½œç”¨åŸŸç”±ä»£ç ä¹¦å†™æ—¶çš„ä½ç½®å†³å®šï¼Œè€Œéè°ƒç”¨æ—¶çš„ä½ç½®ã€‚

```javascript
function outer() {
  let x = 10;
  function inner() {
    console.log(x); // 10ï¼ˆè¯æ³•ä½œç”¨åŸŸï¼šinner å®šä¹‰æ—¶æ•è· xï¼‰
  }
  return inner;
}

const closure = outer();
closure(); // å³ä½¿ outer å·²æ‰§è¡Œå®Œæ¯•ï¼Œä»èƒ½è®¿é—® x
```

### å…­ã€å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹

#### 1. **å¾ªç¯ä¸­çš„é—­åŒ…é™·é˜±**

```javascript
// é”™è¯¯ç¤ºä¾‹ï¼šæ‰€æœ‰å®šæ—¶å™¨éƒ½è¾“å‡º 5
for (var i = 0; i < 5; i++) {
  setTimeout(() => console.log(i), 1000); // è¾“å‡º 5, 5, 5, 5, 5
}

// æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨ let åˆ›å»ºå—çº§ä½œç”¨åŸŸ
for (let i = 0; i < 5; i++) {
  setTimeout(() => console.log(i), 1000); // è¾“å‡º 0, 1, 2, 3, 4
}
```

#### 2. **å…¨å±€å˜é‡æ±¡æŸ“**

- é¿å…åœ¨å…¨å±€ä½œç”¨åŸŸå£°æ˜è¿‡å¤šå˜é‡ï¼Œå¯èƒ½å¯¼è‡´å‘½åå†²çªã€‚

```javascript
// ä¸è‰¯å®è·µ
var appState = { ... }; // å…¨å±€å˜é‡

// æ›´å¥½çš„åšæ³•ï¼šä½¿ç”¨æ¨¡å—æˆ–ç«‹å³æ‰§è¡Œå‡½æ•°
const app = (() => {
  let state = { ... }; // ç§æœ‰çŠ¶æ€
  return {
    getState: () => state
  };
})();
```

#### 3. **const çš„ä¸å¯å˜æ€§**

- `const` ä¿è¯å˜é‡å¼•ç”¨ä¸å˜ï¼Œä½†å¯¹è±¡/æ•°ç»„å†…å®¹å¯ä¿®æ”¹ã€‚

```javascript
const obj = { a: 1 };
obj.a = 2; // åˆæ³•ï¼šä¿®æ”¹å¯¹è±¡å†…å®¹
obj = { b: 2 }; // æŠ¥é”™ï¼šæ— æ³•é‡æ–°èµ‹å€¼
```

### ä¸ƒã€ä½œç”¨åŸŸé“¾ï¼ˆScope Chainï¼‰

- å½“è®¿é—®ä¸€ä¸ªå˜é‡æ—¶ï¼ŒJavaScript ä¼šå…ˆåœ¨å½“å‰ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œè‹¥æ‰¾ä¸åˆ°åˆ™æ²¿ä½œç”¨åŸŸé“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°å…¨å±€ä½œç”¨åŸŸã€‚

```javascript
let globalVar = "Global";

function outer() {
  let outerVar = "Outer";
  function inner() {
    let innerVar = "Inner";
    console.log(innerVar); // "Inner"
    console.log(outerVar); // "Outer"ï¼ˆæ²¿ä½œç”¨åŸŸé“¾æŸ¥æ‰¾ï¼‰
    console.log(globalVar); // "Global"
  }
}
```

# ğŸ’¯ğŸ’¯ğŸ’¯ é¢è¯•é¢˜

### 1. å˜é‡å£°æ˜åŸºç¡€

> ### **é¢˜ç›®ï¼švarã€let å’Œ const çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ**

**ç­”æ¡ˆï¼š**

- `var`ï¼šå‡½æ•°ä½œç”¨åŸŸï¼ˆfunction-scopedï¼‰ï¼Œå…è®¸é‡æ–°å£°æ˜å’Œèµ‹å€¼ï¼Œæ”¯æŒæå‡ï¼ˆhoistedï¼‰ï¼Œåˆå§‹åŒ–ä¸º undefinedã€‚
- `let`ï¼šå—çº§ä½œç”¨åŸŸï¼ˆblock-scopedï¼‰ï¼Œå…è®¸é‡æ–°èµ‹å€¼ä½†ä¸å…è®¸é‡æ–°å£°æ˜ï¼Œæ”¯æŒæå‡ä½†æœ‰ Temporal Dead Zone (TDZ)ã€‚
- `const`ï¼šå—çº§ä½œç”¨åŸŸï¼Œä¸å…è®¸é‡æ–°èµ‹å€¼ï¼ˆä½†å¯¹è±¡å±æ€§å¯ä¿®æ”¹ï¼‰ï¼Œä¸å…è®¸é‡æ–°å£°æ˜ï¼Œæ”¯æŒæå‡ä½†æœ‰ TDZï¼Œå¿…é¡»åˆå§‹åŒ–ã€‚  
  **ç¤ºä¾‹ï¼š**

```javascript
var a = 1;
var a = 2; // å…è®¸
let b = 3; // let b = 4; // é”™è¯¯ï¼šé‡æ–°å£°æ˜
const c = 5; // c = 6; // é”™è¯¯ï¼šé‡æ–°èµ‹å€¼
const obj = { name: "Alice" };
obj.name = "Bob"; // å…è®¸ä¿®æ”¹å±æ€§
```

> ### **é¢˜ç›®ï¼šJavaScript ä¸­å˜é‡å‘½åæœ‰å“ªäº›é™åˆ¶ï¼Ÿ**

**ç­”æ¡ˆï¼š**  
å˜é‡åå¿…é¡»ä»¥å­—æ¯ã€ä¸‹åˆ’çº¿æˆ–ç¾å…ƒç¬¦å·å¼€å¤´ï¼Œå¯åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿æˆ–ç¾å…ƒç¬¦å·ï¼Œä¸èƒ½æ˜¯ä¿ç•™å­—ï¼Œä¸èƒ½åŒ…å«ç©ºæ ¼ã€‚JavaScript æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚  
**ç¤ºä¾‹ï¼š**

```javascript
let firstName = "Alice"; // é©¼å³°å¼ï¼ˆcamelCaseï¼‰ï¼Œæ¨èç”¨äºå˜é‡
let FirstName = "Bob"; // PascalCaseï¼Œæ¨èç”¨äºæ„é€ å‡½æ•°
// let 1name = 'error'; // é”™è¯¯ï¼šä¸èƒ½ä»¥æ•°å­—å¼€å¤´
```

> ### **é¢˜ç›®ï¼šä»€ä¹ˆæ˜¯å˜é‡é˜´å½±ï¼ˆshadowingï¼‰ï¼Ÿ**

**ç­”æ¡ˆï¼š**  
å†…å±‚ä½œç”¨åŸŸä¸­å£°æ˜çš„åŒåå˜é‡ä¼šâ€œé®è”½â€å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡ï¼Œåœ¨å†…å±‚ä½œç”¨åŸŸå†…ä¼˜å…ˆä½¿ç”¨å†…å±‚å˜é‡ã€‚  
**ç¤ºä¾‹ï¼š**

```javascript
let x = "outer";
function test() {
  let x = "inner";
  console.log(x); // 'inner'
}
test();
console.log(x); // 'outer'
```

### 2. ä½œç”¨åŸŸç›¸å…³

> ### **é¢˜ç›®ï¼šJavaScript ä¸­çš„ä½œç”¨åŸŸç±»å‹æœ‰å“ªäº›ï¼Ÿ**

**ç­”æ¡ˆï¼š**

- å…¨å±€ä½œç”¨åŸŸï¼ˆglobal scopeï¼‰ï¼šåœ¨å‡½æ•°å¤–éƒ¨å£°æ˜ï¼Œå¯å…¨å±€è®¿é—®ã€‚
- å‡½æ•°ä½œç”¨åŸŸï¼ˆfunction scopeï¼‰ï¼šåœ¨å‡½æ•°å†…éƒ¨å£°æ˜ï¼Œä»…å‡½æ•°å†…è®¿é—®ï¼ˆvarï¼‰ã€‚
- å—çº§ä½œç”¨åŸŸï¼ˆblock scopeï¼‰ï¼šåœ¨ {} å—å†…å£°æ˜ï¼Œä»…å—å†…è®¿é—®ï¼ˆlet/constï¼‰ã€‚  
  **ç¤ºä¾‹ï¼š**

```javascript
let globalVar = "global"; // å…¨å±€
function func() {
  var funcVar = "function scope"; // å‡½æ•°ä½œç”¨åŸŸ
  if (true) {
    let blockVar = "block scope"; // å—çº§
    console.log(blockVar); // å¯è®¿é—®
  }
  // console.log(blockVar); // é”™è¯¯
}
```

> ### **é¢˜ç›®ï¼šä»€ä¹ˆæ˜¯ä½œç”¨åŸŸé“¾ï¼ˆscope chainï¼‰ï¼Ÿ**

**ç­”æ¡ˆï¼š**  
ä½œç”¨åŸŸé“¾æ˜¯ JavaScript æŸ¥æ‰¾å˜é‡çš„æœºåˆ¶ï¼Œä»å½“å‰ä½œç”¨åŸŸå¼€å§‹å‘ä¸Šå±‚ä½œç”¨åŸŸæœç´¢ï¼Œç›´åˆ°å…¨å±€ä½œç”¨åŸŸã€‚  
**ç¤ºä¾‹ï¼š**

```javascript
let outerVar = "outer";
function outer() {
  function inner() {
    console.log(outerVar); // é€šè¿‡ä½œç”¨åŸŸé“¾è®¿é—® 'outer'
  }
  inner();
}
outer();
```

> ### **é¢˜ç›®ï¼šå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ**

**ç­”æ¡ˆï¼š**  
å…¨å±€å˜é‡åœ¨å‡½æ•°å¤–éƒ¨å£°æ˜ï¼Œå¯å…¨å±€è®¿é—®ï¼Œå®¹æ˜“é€ æˆæ±¡æŸ“ã€‚å±€éƒ¨å˜é‡åœ¨å‡½æ•°æˆ–å—å†…å£°æ˜ï¼Œä»…é™è¯¥ä½œç”¨åŸŸè®¿é—®ã€‚  
**ç¤ºä¾‹ï¼š**

```javascript
let global = "global";
function test() {
  let local = "local";
  console.log(global); // å¯è®¿é—®
}
test();
// console.log(local); // é”™è¯¯
```

### 3. æå‡ä¸ TDZ

> ### **é¢˜ç›®ï¼šä»€ä¹ˆæ˜¯æå‡ï¼ˆhoistingï¼‰ï¼Ÿ**

**ç­”æ¡ˆï¼š**  
æå‡æ˜¯ JavaScript åœ¨æ‰§è¡Œå‰å°†å˜é‡å’Œå‡½æ•°å£°æ˜ç§»åˆ°ä½œç”¨åŸŸé¡¶éƒ¨çš„è¡Œä¸ºã€‚var è¢«æå‡å¹¶åˆå§‹åŒ–ä¸º undefinedï¼›let/const è¢«æå‡ä½†ä¸åˆå§‹åŒ–ï¼Œå¯¼è‡´ TDZã€‚  
**ç¤ºä¾‹ï¼š**

```javascript
console.log(a); // undefined
var a = 1;

console.log(b); // ReferenceError (TDZ)
let b = 2;
```

> ### **é¢˜ç›®ï¼šä»€ä¹ˆæ˜¯ Temporal Dead Zone (TDZ)ï¼Ÿ**

**ç­”æ¡ˆï¼š**  
TDZ æ˜¯ä»å—å¼€å§‹åˆ° let/const å£°æ˜å‰çš„â€œæ­»åŒºâ€ï¼Œåœ¨æ­¤æœŸé—´è®¿é—®å˜é‡ä¼šæŠ›å‡º ReferenceErrorã€‚  
**ç¤ºä¾‹ï¼š**

```javascript
console.log(x); // ReferenceError
let x = 10;
```

> ### **é¢˜ç›®ï¼šlet å’Œ const æ˜¯å¦è¢«æå‡ï¼Ÿ**

**ç­”æ¡ˆï¼š**  
æ˜¯çš„ï¼Œä½†å®ƒä»¬åœ¨ TDZ ä¸­ä¸å¯è®¿é—®ï¼Œç›´åˆ°å£°æ˜è¯­å¥æ‰§è¡Œã€‚  
**ç¤ºä¾‹ï¼š**

```javascript
console.log(y); // ReferenceError
const y = 20;
```

### 4. å®é™…åº”ç”¨ä¸é™·é˜±

> ### **é¢˜ç›®ï¼šä¸ºä»€ä¹ˆåœ¨å¾ªç¯ä¸­ä½¿ç”¨ var ä¼šå‡ºé—®é¢˜ï¼Œè€Œ let ä¸ä¼šï¼Ÿ**

**ç­”æ¡ˆï¼š**  
var æ˜¯å‡½æ•°ä½œç”¨åŸŸï¼Œæ‰€æœ‰è¿­ä»£å…±äº«åŒä¸€ä¸ªå˜é‡ï¼›let æ˜¯å—çº§ä½œç”¨åŸŸï¼Œæ¯è½®è¿­ä»£åˆ›å»ºä¸€ä¸ªæ–°å˜é‡ã€‚  
**ç¤ºä¾‹ï¼š**

```javascript
for (var i = 0; i < 3; i++) {
  setTimeout(() => console.log(i), 100); // 3, 3, 3
}

for (let j = 0; j < 3; j++) {
  setTimeout(() => console.log(j), 100); // 0, 1, 2
}
```

> ### **é¢˜ç›®ï¼šconst å£°æ˜çš„å¯¹è±¡æˆ–æ•°ç»„å¯ä»¥ä¿®æ”¹å—ï¼Ÿ**

**ç­”æ¡ˆï¼š**  
ä¸èƒ½é‡æ–°èµ‹å€¼æ•´ä¸ªå¯¹è±¡ï¼Œä½†å¯ä»¥ä¿®æ”¹å…¶å±æ€§æˆ–å…ƒç´ ï¼Œå› ä¸º const ä¿æŠ¤çš„æ˜¯å¼•ç”¨ã€‚  
**ç¤ºä¾‹ï¼š**

```javascript
const arr = [1, 2];
arr.push(3); // [1, 2, 3] å…è®¸
// arr = [4]; // é”™è¯¯
```

> ### **é¢˜ç›®ï¼šä¸ä½¿ç”¨ var/let/const ç›´æ¥èµ‹å€¼ä¼šæ€æ ·ï¼Ÿ**

**ç­”æ¡ˆï¼š**  
åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¼šåˆ›å»ºå…¨å±€å˜é‡ï¼ˆæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸï¼‰ï¼›åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¼šæŠ›å‡ºé”™è¯¯ã€‚æ¨èå§‹ç»ˆä½¿ç”¨å£°æ˜å…³é”®å­—ã€‚  
**ç¤ºä¾‹ï¼š**

```javascript
function test() {
  z = 10; // å…¨å±€å˜é‡
}
test();
console.log(z); // 10
```

> ### **é¢˜ç›®ï¼švar ä¸ºä»€ä¹ˆä¸æ¨èåœ¨ç°ä»£ JS ä¸­ä½¿ç”¨ï¼Ÿ**

**ç­”æ¡ˆï¼š**  
var æ˜¯å‡½æ•°ä½œç”¨åŸŸä¸”æ”¯æŒæå‡ï¼Œå®¹æ˜“å¯¼è‡´ bugï¼ˆå¦‚æ„å¤–å…¨å±€å˜é‡ï¼‰ã€‚let/const æä¾›å—çº§ä½œç”¨åŸŸï¼Œæ›´å®‰å…¨å’Œå¯é¢„æµ‹ã€‚

> ### **é¢˜ç›®ï¼šnull å’Œ undefined çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ**

**ç­”æ¡ˆï¼š**  
undefined è¡¨ç¤ºå˜é‡å£°æ˜ä½†æœªèµ‹å€¼ï¼›null è¡¨ç¤ºæœ‰æ„è®¾ç½®ä¸ºç©ºå€¼ã€‚ä¸¤è€…åœ¨æ¾æ•£æ¯”è¾ƒä¸­ç›¸ç­‰ï¼ˆ==ï¼‰ï¼Œä½†ä¸¥æ ¼ä¸ç›¸ç­‰ï¼ˆ===ï¼‰ã€‚  
**ç¤ºä¾‹ï¼š**

```javascript
let undef;
console.log(undef); // undefined
let nul = null;
console.log(nul); // null
console.log(null == undefined); // true
```
